<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Initiation</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #050505;
  overflow: hidden;
  touch-action: manipulation;
}

canvas {
  display: block;
}
</style>
</head>

<body>
<canvas id="c"></canvas>

<script>
/* ===============================
   CANVAS SETUP
================================ */
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* ===============================
   CORE STATE (ONLY ONE VARIABLE)
================================ */
let reactionWindow = 0.45; // hidden, adaptive
let lastTap = null;

/* ===============================
   LINE PARAMETERS (FIXED)
================================ */
const baseX = () => canvas.width / 2;
const color = "rgba(235,235,225,0.12)";
const width = 1;

/* degenerate spiral */
let t = 0;

/* ===============================
   INPUT
================================ */
canvas.addEventListener("pointerdown", () => {
  const now = performance.now();

  if (lastTap !== null) {
    const dt = (now - lastTap) / 1000;

    if (dt < reactionWindow) {
      reactionWindow *= 0.985; // tighten
    } else {
      reactionWindow *= 1.015; // loosen
    }

    reactionWindow = Math.max(0.15, Math.min(0.9, reactionWindow));
  }

  lastTap = now;
});

/* ===============================
   DRAW LOOP
================================ */
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  t += 0.0006; // imperceptible drift

  const drift =
    Math.sin(t) * 0.4 +
    Math.sin(t * 0.37) * 0.25;

  const x = baseX() + drift;

  ctx.beginPath();
  ctx.moveTo(x, 0);
  ctx.lineTo(x, canvas.height);
  ctx.lineWidth = width;
  ctx.strokeStyle = color;
  ctx.stroke();

  requestAnimationFrame(draw);
}

draw();
</script>
</body>
</html>
