import random

class GameGovernor:
    def __init__(
        self,
        error_ceiling=10,
        zero_penalty=1.0,
        action_error=1.0,
        info_reward=0.0,
    ):
        self.error = 0.0
        self.error_ceiling = error_ceiling
        self.zero_penalty = zero_penalty
        self.action_error = action_error
        self.info_reward = info_reward
        self.timestep = 0

    def step(self, action):
        """
        action âˆˆ {"ACT", "WAIT"}
        WAIT = advances time without information
        ACT  = probes environment (information-generating)
        """

        self.timestep += 1

        if action == "WAIT":
            # suggestive allergy to 0
            self.error += self.zero_penalty

        elif action == "ACT":
            # stochastic outcome (fake environment)
            outcome = random.choice(["GOOD", "BAD"])

            if outcome == "BAD":
                self.error += self.action_error
            else:
                self.error = max(0.0, self.error - self.info_reward)

        else:
            raise ValueError("Invalid action")

        return self._status()

    def _status(self):
        return {
            "timestep": self.timestep,
            "error": self.error,
            "alive": self.error < self.error_ceiling,
        }
