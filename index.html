<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Maintain A</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

<style>
  html, body {
    margin: 0;
    height: 100%;
    background: #000;
    color: #fff;
    font-family: system-ui, sans-serif;
    overflow: hidden;
    touch-action: manipulation;
  }

  #app {
    position: fixed;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  #A {
    font-size: 80px;
    margin-bottom: 40px;
    opacity: 0;
    transition: opacity 120ms linear;
  }

  #A.on {
    opacity: 1;
  }

  #tap {
    padding: 18px 60px;
    font-size: 20px;
    border-radius: 999px;
    border: none;
    background: #222;
    color: #fff;
  }
</style>
</head>

<body>
  <div id="app">
    <div id="A">A</div>
    <button id="tap">tap</button>
  </div>

<script>
/*
  MF STRUCTURE:

  - Tap has ONE meaning: advance state
  - State is adversarial
  - A survives in some states, dies in others
  - No time, no rhythm, no scoring
*/

let state = 0;

// fixed adversarial structure
// A exists only in these phases
const survivesIn = new Set([0, 2, 5]);

const PERIOD = 7; // size of structure (arbitrary but explicit)

const Ael = document.getElementById("A");
const tapBtn = document.getElementById("tap");

function update() {
  const alive = survivesIn.has(state);
  Ael.classList.toggle("on", alive);
}

tapBtn.addEventListener("click", () => {
  state = (state + 1) % PERIOD;
  update();
});

// initial condition
update();
</script>
</body>
</html>
