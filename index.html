<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
html, body {
  margin: 0;
  height: 100%;
  background: #070707;
  overflow: hidden;

  /* iOS hard disable */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}

canvas {
  display: block;
  touch-action: none;
}
</style>
</head>

<body>
<canvas id="c"></canvas>

<script>
/* ---------- iOS gesture kill ---------- */
["touchstart","touchmove","touchend"].forEach(t =>
  document.addEventListener(t, e => e.preventDefault(), { passive:false })
);

/* ---------- canvas ---------- */
const c = document.getElementById("c");
const ctx = c.getContext("2d");

function resize(){
  c.width = innerWidth;
  c.height = innerHeight;
}
resize();
addEventListener("resize", resize);

/* ---------- state ---------- */
let contact = false;
let stability = 0;      // slow-moving internal score
let target = 0;         // where stability wants to go

/* ---------- input ---------- */
c.addEventListener("pointerdown", () => {
  contact = true;
  target = 1;
});

c.addEventListener("pointerup", () => {
  contact = false;
  target = 0;
});

/* ---------- loop ---------- */
function loop(){
  // slow, non-arbitrary adaptation
  stability += (target - stability) * 0.002;

  ctx.clearRect(0,0,c.width,c.height);

  // line properties
  const x = c.width / 2;
  const alpha = 0.05 + stability * 0.35;
  const jitter = (1 - stability) * 1.5;

  ctx.strokeStyle = `rgba(240,240,240,${alpha})`;
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(x + (Math.random()-0.5)*jitter, 0);
  ctx.lineTo(x + (Math.random()-0.5)*jitter, c.height);
  ctx.stroke();

  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
