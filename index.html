<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<style>
  html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: #000;
    overflow: hidden;
    touch-action: none;
  }
</style>
</head>

<body>
<script>
/*
  0-ALLERGY CORE
  ----------------
  • Screen is inert
  • Inaction is a liability
  • Action only stabilizes
  • No visible feedback
*/

// ---- internal state ----
let lastAction = performance.now();

// single decay variable (reaction window proxy)
let windowMs = 400;
const MIN_WINDOW = 120;
const MAX_WINDOW = 600;

// decay rate (0-allergy)
const DECAY_PER_MS = 0.02;

// ---- input: release only ----
document.addEventListener("pointerup", () => {
  const now = performance.now();
  const dt = now - lastAction;
  lastAction = now;

  // action only prevents decay; never rewards
  if (dt <= windowMs) {
    windowMs = Math.max(MIN_WINDOW, windowMs * 0.97);
  } else {
    windowMs = Math.min(MAX_WINDOW, windowMs * 1.03);
  }
}, { passive: true });

// ---- decay loop ----
(function loop() {
  const now = performance.now();

  // 0-allergy: inaction always worsens state
  const idle = now - lastAction;
  if (idle > windowMs) {
    windowMs = Math.max(
      MIN_WINDOW,
      windowMs - (idle - windowMs) * DECAY_PER_MS
    );
  }

  requestAnimationFrame(loop);
})();
</script>
</body>
</html>
